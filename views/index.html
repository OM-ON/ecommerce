<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
      <link rel="stylesheet" href="index.css">
      <title>Magic Home</title>
      <head>
         <style>
            * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            }
            /* Space for the navbar to prevent overlap */
            .content {
            padding-top: 0; /* Remove any space above */
            }
            /* Slideshow container with full height */
            .slideshow-container {
            width: 100%;
            height: auto; /* Full viewport height */
            position: relative;
            margin: 0;
            overflow: hidden;
            border-radius: 0;
            /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); */
            }
            .mySlides {
            display: none;
            width: 100%;
            height: 100%;
            }
            .mySlides img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Prevent cutting of the image while maintaining aspect ratio */
            display: block;
            }
            /* Responsive adjustments */
            @media (max-width: 768px) {
            .slideshow-container {
            height: 60vh; /* Slightly smaller height for tablet-sized screens */
            }
            .dot {
            height: 12px;
            width: 12px;
            }
            }
            @media (max-width: 480px) {
            .slideshow-container {
            height: 50vh; /* Smaller height for mobile screens */
            }
            }
            /* Chatbot Icon */
            .chat-icon {
            position: fixed;  
            bottom: 20px;  
            right: 20px;    
            z-index: 9999;
            width: 60px;
            height: 60px;
            position: fixed;
            bottom: 20px;
            right: 20px;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
            background: none; /* Remove background */
            border: none; /* Remove border */
            box-shadow: none; /* Remove shadow */
            }
            .chat-icon img {
            width: 60px; /* Make sure the image takes full size */
            height: auto;
            }
            /* Chat Container */
            .chat-container {
            position: fixed;  
            bottom: 20px;  
            right: 20px;  
            z-index: 9999; 
            width: 350px;
            position: fixed;
            bottom: 80px;
            right: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: none; /* Initially hidden */
            }
            .chat-header {
            background-color:darkgrey;
            color: white;
            padding: 10px;
            text-align: center;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            }
            .chat-header h1 {
            margin: 0;
            flex-grow: 1;
            }
            .cb {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            }
            .chat-box {
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            height: 300px;
            background-color: #f9f9f9;
            }
            .chat-message {
            margin: 10px 0;
            padding: 10px 15px;
            border-radius: 20px;
            line-height: 1.5;
            color: #333;
            }
            .bot-message {
            text-align: left;
            }
            .user-message {
            text-align: right;
            }
            .input-container {
            display: flex;
            padding: 10px;
            }
            input[type="text"] {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
            margin-right: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }
            button {
            padding: 10px;
            border: none;
            background-color:lightcoral;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            }
            .chat-text {
            font-size: 14px;
            font-weight: bold;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            background: linear-gradient(45deg, #ff7eb3, #ff758c, #ff5e62);
            box-shadow: 0px 4px 10px rgba(255, 94, 98, 0.4);
            position: absolute;
            bottom: 70px;
            right: 0px;
            white-space: nowrap;
            transition: opacity 0.3s ease-in-out;
            }
            #mic-btn {
            background-color: white;
            border: none;
            width: 40px;
            height: 40px;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 5px;
            transition: background-color 0.3s ease-in-out;
            }
            #mic-btn {
            position: relative;
            }
            #mic-btn.listening {
            background-color: #d93025;
            animation: pulse 1s infinite;
            }
            #sb svg, #mic-btn svg {
            width: 24px;
            height: 24px;
            fill: #5f6368;
            }
            #mic-btn.listening svg {
            fill: white;
            }
            .cart-container {
            position: relative;
            cursor: pointer;
            }
            .cart-icon {
            position: relative;
            font-size: 24px;
            }
            .cart-icon span {
            background: red;
            color: white;
            border-radius: 50%;
            padding: 5px 10px;
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 14px;
            }
            #notification {
            position: fixed;
            top: 20px; /* Slightly lower for better visibility */
            left: 50%;
            transform: translateX(-50%);
            background: green;
            color: white;
            padding: 12px 18px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
            z-index: 9999; /* Ensures it stays on top of other elements */
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
            }
            /* Fade out effect */
            #notification.hidden {
            opacity: 0;
            pointer-events: none; /* Prevents interaction during fade-out */
            }
            /* CSS Variables for Consistency */
            :root {
            --primary-color: #333;
            --secondary-color: #f8f9fa;
            --accent-color: red;
            --text-color: white;
            --shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            --spacing: 15px;
            }
            .cons {
            display: flex;
            gap: var(--spacing);
            }
            /* Wishlist Icon */
            .wishlist-container {
            position: relative;
            cursor: pointer;
            }
            .wishlist-icon {
            font-size: 24px;
            position: relative;
            }
            .wishlist-icon span {
            background: var(--accent-color);
            color: var(--text-color);
            border-radius: 50%;
            padding: 5px 10px;
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 14px;
            }
            /* Wishlist Button */
            .wishlist-btn {
            background: none;
            border: none;
            font-size: 30px;
            cursor: pointer;
            transition: color 0.3s ease-in-out;
            color: transparent;
            -webkit-text-stroke: 1.5px black;
            }
            .wishlist-btn.active {
            color: var(--accent-color);
            -webkit-text-stroke: 0;
            }
            /* Wishlist Popup */
            #wishlist-popup {
            position: absolute;
            top: 60px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            border: 1px solid #ddd;
            animation: slideDown 0.3s ease-in-out;
            }
            @keyframes slideDown {
            from {
            opacity: 0;
            transform: translateY(-20px);
            }
            to {
            opacity: 1;
            transform: translateY(0);
            }
            }
            #wishlist-popup.show {
            display: block;
            }
            /* Wishlist Items */
            #wishlist-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
            }
            .wishlist-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            background: #f9f9f9;
            transition: background 0.3s ease;
            }
            .wishlist-item:hover {
            background: #f1f1f1;
            }
            .wishlist-item img {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            }
            .wishlist-item span {
            font-size: 14px;
            color: #333;
            }
            .wishlist-item .price {
            font-size: 14px;
            color: var(--accent-color);
            font-weight: bold;
            margin-left: auto; /* Align price to the right */
            }
            /* Clear All Button */
            #clear-wishlist {
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background: var(--accent-color);
            color: var(--text-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
            }
            #clear-wishlist:hover {
            background: #cc0000;
            }
            /* Close Button */
            .close-bt{
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            color: var(--accent-color);
            background: none;
            border: none;
            }
            /* Notification */
            #notificatio {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: var(--text-color);
            padding: 12px 20px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            z-index: 9999; /* Ensures it's above all elements */
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 200px;
            max-width: 300px;
            text-align: center;
            }
            /* Show Notification */
            #notificatio.show {
            opacity: 1;
            }
            /* Responsive Design */
            @media (max-width: 600px) {
            #wishlist-popup {
            width: 90%;
            right: 5%;
            top: 70px;
            }
            }
         </style>
   </head>
   <body>
      <nav class="nav-bar">
         <div class="nav-logo">
            <img src="img/product/newlogo.png" alt="MAGIC" />
         </div>
         <div class="search-bar">
            <input type="search" id="product-search" placeholder="" onkeyup="filterProducts()" />
            <span class="search-icon">
            <i class="fas fa-search"></i>
            </span>
            <!-- Product List (Dropdown) -->
            <ul id="product-list" style="
               position: absolute;
               top: 110%;
               left: 0;
               width: 100%;
               background: white;
               border: 1px solid #ddd;
               border-radius: 8px;
               list-style: none;
               padding: 0;
               margin: 5px 0 0 0;
               box-shadow: 0 2px 8px rgba(0,0,0,0.1);
               max-height: 200px;
               overflow-y: auto;
               display: none; /* hidden by default */
               flex-direction: column;
               z-index:9999;
               padding:10px;
               "></ul>
         </div>
         <div id="notification" class="hidden">‚úÖ Product added to cart!</div>
         <!-- Notification -->
         <div id="notificatio"></div>
         <!-- Wishlist Popup -->
         <div id="wishlist-popup">
            <h3>Your Wishlist</h3>
            <span id="close-wishlist" class="close-bt">&times;</span>
            <div id="wishlist-items"></div>
            <button id="clear-wishlist" class="clear-btn">Clear All</button>
         </div>
         <!-- Desktop Menu -->
         <ul class="nav-categories">
            <li><a class="active" href="/home">Home</a></li>
            <li><a  href="/jewellery">Jewellery</a></li>
            <li><a href="/handbags">Handbag</a></li>
            <li><a href="/sunglasses">Sunglass</a></li>
            <li><a href="/perfumes">Perfume</a></li>
            <li><a href="/logout">logout</a></li>
         </ul>
         <div class="nav-account">
            <div class="cons">
               <div class="wishlist-container">
                  <div class="wishlist-icon" id="wishlist-icon">
                     ‚ù§Ô∏è <span id="wishlist-count">0</span>
                  </div>
               </div>
            </div>
            <div class="cart-container">
               <div class="cart-icon" id="cart-icon">
                  üõí <span id="cart-count">0</span>
               </div>
            </div>
            <span class="menu-btn" onclick="openSidebar()"><i class="fas fa-bars"></i></span>
         </div>
      </nav>
      <!-- Sidebar Menu -->
      <div class="sidebar" id="sidebar">
         <span class="clos-btn" onclick="closeSidebar()">&times;</span>
         <ul>
            <li></i> <a class="active" href="fix.html">Home</a></li>
            <li></i> <a href="nav.html">Jewellery</a></li>
            <li></i> <a href="handbag.html">Handbag</a></li>
            <li></i> <a href="sunglasses.html">Sunglass</a></li>
            <li></i> <a href="perfume.html">Perfume</a></li>
            <li> </i><a href="home.html">logout</a></li>
         </ul>
      </div>
      <main>
      <!-- Main content -->
      <div class="content">
         <div class="slideshow-container">
            <div class="mySlides">
               <img src="img/product/temp1.jpg" alt="Slide 1">
            </div>
            <div class="mySlides">
               <img src="img/product/temp2.jpg" alt="Slide 2">
            </div>
            <div class="mySlides">
               <img src="img/product/temp3.jpg" alt="Slide 3">
            </div>
            <div class="mySlides">
               <img src="img/product/temp4.jpg" alt="Slide 4">
            </div>
         </div>
         <div class="dot-container">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
         </div>
      </div>
      <h2>Featured Product</h2>
      <section>
         <div id="product" class="product-container">
         <!-- Product 1 -->
         <div class="product-card" data-id="1" data-name="Goggles" data-price="2999" data-image="img/product/of1.jpg" data-description="Stylish Gucci goggles perfect for fashion and protection.">
            <div class="image-container">
               <a href="product1.html">
               <img src="img/product/of1.jpg" alt="Goggles" class="product-image active">
               </a>
               <img src="img/product/of2.jpg" alt="Image 2" class="product-image">
               <img src="img/product/of3.jpg" alt="Image 3" class="product-image">
            </div>
            <div class="product-info">
               <button class="wishlist-btn">&#10084;</button>
            </div>
            <div class="rating">
               <span>4.3 ‚òÖ</span> <span>| 43</span>
            </div>
            <div class="price">
               <span class="current-price">‚Çπ2,999</span>
               <span class="original-price">‚Çπ3,399</span>
            </div>
            <div class="product-name">Goggles</div>
            <div class="btn">
               <button class="add-to-cart">Add to Cart</button>
               <button class="buy-now">Buy Now</button>
            </div>
         </div>
         <!-- Product 2 -->
         <div class="product-card" data-id="2" data-name="Bracelet" data-price="4999" data-image="img/product/hbrac2.jpg" data-description="A beautiful diamond eternity bracelet perfect for all occasions.">
            <div class="image-container">
               <a href="product2.html">
               <img src="img/product/hbrac2.jpg" alt="Bracelet" class="product-image active">
               </a>
               <img src="img/product/vbrac2.jpg" alt="Image 2" class="product-image">
               <img src="img/product/mbrac2.jpg" alt="Image 3" class="product-image">
            </div>
            <div class="product-info">
               <button class="wishlist-btn">&#10084;</button>
            </div>
            <div class="rating">
               <span>4.2 ‚òÖ</span> <span>| 43</span>
            </div>
            <div class="price">
               <span class="current-price">‚Çπ4,999</span>
               <span class="original-price">‚Çπ6,000</span>
            </div>
            <div class="product-name">Bracelet</div>
            <div class="btn">
               <button class="add-to-cart">Add to Cart</button>
               <button class="buy-now">Buy Now</button>
            </div>
         </div>
         <!-- Product 3 -->
         <div class="product-card" data-id="3" data-name="Sunglass thinx" data-price="4000" data-image="img/product/s1.jpg" data-description="Trendy rectangular sunglasses perfect for a stylish look.">
            <div class="image-container">
               <a href="product3.html">
               <img src="img/product/s1.jpg" alt="Sunglass thinx" class="product-image active">
               </a>
               <img src="img/product/s2.jpg" alt="Image 2" class="product-image">
               <img src="img/product/s3.jpg" alt="Image 3" class="product-image">
            </div>
            <div class="product-info">
               <button class="wishlist-btn">&#10084;</button>
            </div>
            <div class="rating">
               <span>4.1 ‚òÖ</span> <span>| 43</span>
            </div>
            <div class="price">
               <span class="current-price">‚Çπ4,000</span>
               <span class="original-price">‚Çπ7,000</span>
            </div>
            <div class="product-name">Sunglass thinx</div>
            <div class="btn">
               <button class="add-to-cart">Add to Cart</button>
               <button class="buy-now">Buy Now</button>
            </div>
         </div>
         <!-- Product 4 -->
         <div class="product-card" data-id="4" data-name="Necklace" data-price="4999" data-image="img/product/2hnc.jpg">
            <div class="image-container">
               <a href="product4.html">
               <img src="img/product/2hnc.jpg" alt="Necklace" class="product-image active">
               </a>
               <img src="img/product/2vnc.jpg" alt="Image 2" class="product-image">
               <img src="img/product/2mnc.jpg" alt="Image 3" class="product-image">
            </div>
            <div class="product-info">
               <button class="wishlist-btn">&#10084;</button>
            </div>
            <div class="rating">
               <span>4.8 ‚òÖ</span> <span>| 43</span>
            </div>
            <div class="price">
               <span class="current-price">‚Çπ4,999</span>
               <span class="original-price">‚Çπ6,399</span>
            </div>
            <div class="product-name">Necklace</div>
            <div class="btn">
               <button class="add-to-cart">Add to Cart</button>
               <button class="buy-now">Buy Now</button>
            </div>
         </div>
         <div class="chat-icon" id="chat-icon">
            <div class="chat-text" id="chatText">May I help you?</div>
            <img src="img/chatbot.png" alt="Chat">
         </div>
         <!-- Chatbot Container -->
         <div class="chat-container" id="chat-container">
            <div class="chat-header">
               <h1>Magic AI</h1>
               <button class="cb" id="cb">&times;</button>
            </div>
            <div class="chat-box" id="chat-box">
               <div class="chat-message bot-message">Hello! Welcome to MAGIC Accessories! How can I assist you today?</div>
            </div>
            <div class="input-container">
               <input type="text" id="user-input" placeholder="Speak or type">
               <button id="mic-btn">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                     <path d="M12 15c1.93 0 3.5-1.57 3.5-3.5v-6C15.5 3.57 13.93 2 12 2S8.5 3.57 8.5 5.5v6c0 1.93 1.57 3.5 3.5 3.5zM6 11.5C6 14.54 8.46 17 11.5 17h1c3.04 0 5.5-2.46 5.5-5.5V10h-2v1.5c0 2.21-1.79 4-4 4h-1c-2.21 0-4-1.79-4-4V10H6v1.5zM10 20v2h4v-2h-4z"/>
                  </svg>
               </button>
               <button id="sb">Send</button>
            </div>
         </div>
      </section>
      <footer class="footer">
         <div class="footer-container">
            <div class="footer-col">
               <h4>Contact Us</h4>
               <ul>
                  <li><a href="theories/about.html">About Us</a></li>
                  <li><a href="mailto:om64312@gmail.com">om64312@gmail.com</a></li>
                  <li><a href="theories/info.html">Info</a></li>
               </ul>
            </div>
            <div class="footer-col">
               <h4>Consumer Policy</h4>
               <ul>
                  <li><a href="theories/terms of service.html">Terms of Services</a></li>
                  <li><a href="theories/privacy.html">Privacy</a></li>
               </ul>
            </div>
            <div class="footer-col">
               <h4>Keep in touch with Us</h4>
               <ul class="fa-ul">
                  <li><a href="https://x.com/Soni13062004?t=M0_6NmR6ZCFP9s_RLxrP6A&s=09">
                     <i class="fab fa-twitter"></i></a>
                  </li>
                  <li><a href="https://www.linkedin.com/in/om-soni-6425262a9?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">
                     <i class="fab fa-linkedin"></i></a>
                  </li>
                  <li><a href="https://wa.me/+919313812189?text=Hello%2C%20I%27d%20like%20to%20chat%20with%20you!" class="contact-option whatsapp-link" target="_blank" >
                     <i class="fab fa-whatsapp"></i> </a>
                  </li>
               </ul>
            </div>
            <div class="footer-col">
               <h4>Let Us Help You</h4>
               <ul>
                  <li><a href="theories/hecu.html">Help & Customer Service</a></li>
                  <li><a href="theories/return and refund.html">Returns & Refunds</a></li>
                  <li><a href="theories/shipdel.html">Shipping & Delivery</a></li>
               </ul>
            </div>
            <div class="footer-col">
               <h4>More from Magic</h4>
               <ul>
                  <li><a href="handbags">Magic Handbags</a></li>
                  <li><a href="jewellery">Magic Jewellery</a></li>
                  <li><a href="sunglasses">Magic Sunlasses</a></li>
               </ul>
            </div>
         </div>
         <div class="footer-bottom">
            &copy; 2025 Magic. All rights reserved.
         </div>
      </footer>
<script>
   const micBtn = document.getElementById("mic-btn");
   const userInput = document.getElementById("user-input");
   
   const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
   recognition.continuous = false; // Stops automatically after a short pause
   recognition.interimResults = true;
   recognition.lang = "en-US";
   
   micBtn.addEventListener("click", () => {
      if (micBtn.classList.contains("listening")) {
          recognition.stop();
          micBtn.classList.remove("listening");
      } else {
          recognition.start();
          micBtn.classList.add("listening");
      }
   });
   
   recognition.onresult = (event) => {
      let transcript = "";
      for (let i = event.resultIndex; i < event.results.length; i++) {
          transcript += event.results[i][0].transcript + " ";
      }
      userInput.value = transcript.trim();
   };
   
   recognition.onerror = (event) => {
      console.error("Speech Recognition Error: ", event.error);
   };
   
   recognition.onend = () => {
      micBtn.classList.remove("listening");
   };
   function showNotification(message) {
   let notification = document.getElementById("notification");
   notification.textContent=message;
   
   notification.classList.remove("hidden");
   
   clearTimeout(notification.timer);
   notification.timer = setTimeout(() => {
   notification.classList.add("hidden");
   }, 2500); // Extended duration for better visibility
   }
   document.querySelectorAll(".add-to-cart").forEach(button => {
   button.addEventListener("click", async (e) => {
   
   const card = e.target.closest(".product-card");
   
   const item = {
   name: card.dataset.name,
   price: Number(card.dataset.price),
   image: card.dataset.image,
   quantity: 1 // Default quantity
   };
   
   const res = await fetch("/add-to-cart", {
   method: "POST",
   headers: { "Content-Type": "application/json" },
   body: JSON.stringify(item)
   });
   
   const result = await res.json();
   updateCartCount();
   showNotification(result.message);
   
   });
   });
   
   document.querySelectorAll(".buy-now").forEach(button => {
   button.addEventListener("click", async (e) => {
   const card = e.target.closest(".product-card");
   
   const item = {
   name: card.dataset.name,
   price: Number(card.dataset.price),
   image: card.dataset.image,
   quantity: 1 // Default quantity
   };
   
   try {
   const res = await fetch("/add-to-cart", {
   method: "POST",
   headers: { "Content-Type": "application/json" },
   credentials: "include", // important if using sessions
   body: JSON.stringify(item)
   });
   
   const result = await res.json();
   
   if (res.ok) {
   updateCartCount();
   showNotification(result.message);
   // ‚úÖ Redirect to checkout page
   window.location.href = "/checkout";
   } else {
   showNotification("‚ùå " + result.message);
   }
   } catch (err) {
   console.error("Add to cart failed:", err);
   showNotification("‚ùå Something went wrong.");
   }
   });
   });
   
   async function updateCartCount() {
   const res = await fetch("/get-cart");
   const data = await res.json();
   
   let totalCount = 0;
   if (data.cart && Array.isArray(data.cart)) {
   totalCount = data.cart.reduce((sum, item) => sum + item.quantity, 0);
   }
   
   document.getElementById("cart-count").textContent = totalCount;
   }
   
   // Call it on page load
   window.addEventListener("DOMContentLoaded", updateCartCount);
           document.addEventListener("DOMContentLoaded", function () {
              
      //let cart = JSON.parse(localStorage.getItem("cart")) || [];
      //updateCartCount();
   
      // document.querySelectorAll(".add-to-cart").forEach(button => {
      //     alert();
      //     button.addEventListener("click", function () {
      //         let productCard = this.closest(".product-card");
      //         let productId = productCard.getAttribute("data-id");
      //         let productName = productCard.getAttribute("data-name");
      //         let productPrice = parseFloat(productCard.getAttribute("data-price"));
      //         let productImage = productCard.getAttribute("data-image");
   
      //         let existingProduct = cart.find(item => item.id === productId);
      //         if (existingProduct) {
      //             existingProduct.quantity++;
      //         } else {
      //             cart.push({
      //                 id: productId,
      //                 name: productName,
      //                 price: productPrice,
      //                 image: productImage,
      //                 quantity: 1
      //             });
      //         }
   
      //         localStorage.setItem("cart", JSON.stringify(cart));
      //         updateCartCount();
      //         showNotification();
      //     });
      // });
   
      // function updateCartCount() {
      //     let totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      //     document.getElementById("cart-count").textContent = totalItems;
      // }
   
     
   
   
      document.getElementById("cart-icon").addEventListener("click", function () {
          window.location.href = "cart.html";
      });
   });
   // const placeholderTexts = ["Search for Handbags", "Search for Perfumes", "Search for Sunglasses","Search for Jewellery",];
   // let placeholderIndex = 0;
   // let charIndex = 0;
   // let typingSpeed = 100;
   // let erasingSpeed = 50;
   // let delayBetweenTexts = 1500;
   // const searchInput = document.getElementById("product-search");
   
   // function typePlaceholder() {
   //     if (charIndex < placeholderTexts[placeholderIndex].length) {
   //         searchInput.setAttribute("placeholder", placeholderTexts[placeholderIndex].substring(0, charIndex + 1));
   //         charIndex++;
   //         setTimeout(typePlaceholder, typingSpeed);
   //     } else {
   //         setTimeout(erasePlaceholder, delayBetweenTexts);
   //     }
   // }
   
   // function erasePlaceholder() {
   //     if (charIndex > 0) {
   //         searchInput.setAttribute("placeholder", placeholderTexts[placeholderIndex].substring(0, charIndex - 1));
   //         charIndex--;
   //         setTimeout(erasePlaceholder, erasingSpeed);
   //     } else {
   //         placeholderIndex = (placeholderIndex + 1) % placeholderTexts.length;
   //         setTimeout(typePlaceholder, typingSpeed);
   //     }
   // }
   
   // document.addEventListener("DOMContentLoaded", () => {
   //     setTimeout(typePlaceholder, 500);
   // });
   
   const placeholderTexts = [
   "Search for Handbags", 
   "Search for Perfumes", 
   "Search for Sunglasses",
   "Search for Jewellery",
   ];
   let placeholderIndex = 0;
   let charIndex = 0;
   let typingSpeed = 100;
   let erasingSpeed = 50;
   let delayBetweenTexts = 1500;
   const searchInput = document.getElementById("product-search");
   
   function typePlaceholder() {
   if (charIndex < placeholderTexts[placeholderIndex].length) {
   searchInput.setAttribute("placeholder", placeholderTexts[placeholderIndex].substring(0, charIndex + 1));
   charIndex++;
   setTimeout(typePlaceholder, typingSpeed);
   } else {
   setTimeout(erasePlaceholder, delayBetweenTexts);
   }
   }
   
   function erasePlaceholder() {
   if (charIndex > 0) {
   searchInput.setAttribute("placeholder", placeholderTexts[placeholderIndex].substring(0, charIndex - 1));
   charIndex--;
   setTimeout(erasePlaceholder, erasingSpeed);
   } else {
   placeholderIndex++;
   if (placeholderIndex >= placeholderTexts.length) placeholderIndex = 0;
   setTimeout(typePlaceholder, typingSpeed);
   }
   }
   
   document.addEventListener("DOMContentLoaded", function() {
   if (placeholderTexts.length) setTimeout(typePlaceholder, delayBetweenTexts);
   });
   
   // Products array
   const products = [
   "Goggles",
   "Bracelet",
   "Sunglass Epic",
   "Necklace",
   "Chain Bracelet",
   "Neckchain",
   "Gold Ring",
   "Golden Bracelet",
   "Ring",
   "Ear Ring",
   "Handbag Brown",
   "Handbag Black",
   "Handbag Greycraft",
   "Handbag",
   "Sunglass thinx",
   "Glasses",
   "ENVY",
   "Denver",
   "Wild Stone",
   "Fogg"
   ];
   
   
   const productList = document.getElementById("product-list");
   
   function displayProducts(filteredProducts) {
   productList.innerHTML = "";
   
   if (filteredProducts.length === 0) {
   productList.innerHTML = "<li style='padding: 10px;'>No products found</li>";
   productList.style.display = "flex";
   return;
   }
   
   filteredProducts.forEach(product => {
   const li = document.createElement("li");
   li.textContent = product;
   li.style.padding = "10px 15px";
   li.style.cursor = "pointer";
   li.style.borderBottom = "1px solid #eee";
   
   li.addEventListener('mouseover', () => li.style.backgroundColor = "#f0f0f0");
   li.addEventListener('mouseout', () => li.style.backgroundColor = "white");
   
   // Add click event to redirect to the search page with the selected product
   li.addEventListener('click', () => {
   // Redirect to the search page with the clicked product as query
   window.location.href = `/search-page?q=${encodeURIComponent(product)}`;
   });
   
   productList.appendChild(li);
   });
   
   
   productList.style.display = "flex"; // show the list
   }
   const searchIcon = document.querySelector(".search-icon");
   
   // Add click event listener to search icon
   searchIcon.addEventListener("click", () => {
   const query = searchInput.value.trim();
   
   if (query) {
   // Redirect to search page with query as a parameter
   window.location.href = `/search-page?q=${encodeURIComponent(query)}`;
   } else {
   // Optionally, you can show a notification or alert if the search field is empty
   showNotification("Please enter a search term", "red");
   }
   });
   
   
   function filterProducts() {
   const searchTerm = searchInput.value.toLowerCase();
   if (searchTerm.trim() === "") {
   productList.style.display = "none"; // hide list when input is empty
   return;
   }
   
   const filtered = products.filter(product => product.toLowerCase().includes(searchTerm));
   displayProducts(filtered);
   }
   
   // Hide product list when clicking outside
   document.addEventListener('click', function(event) {
   if (!event.target.closest('.search-bar')) {
   productList.style.display = 'none';
   }
   });
   
   function openSidebar() {
   document.getElementById("sidebar").style.left = "0";
   }
   
   function closeSidebar() {
   document.getElementById("sidebar").style.left = "-250px";
   }
   let slideIndex = 0;
   let autoSlide;
   
   function showSlides() {
      let slides = document.getElementsByClassName("mySlides");
      let dots = document.getElementsByClassName("dot");
      for (let i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";  
      }
      for (let i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
      }
      slideIndex++;
      if (slideIndex > slides.length) { slideIndex = 1; }    
      slides[slideIndex - 1].style.display = "block";  
      dots[slideIndex - 1].className += " active";
   
      autoSlide = setTimeout(showSlides, 2000);
   }
   
   function currentSlide(n) {
      clearTimeout(autoSlide);
      slideIndex = n;
      showSlides();
   }
   
   showSlides();
   const chatIcon = document.getElementById("chat-icon");
   const chatContainer = document.getElementById("chat-container");
   const closeButton = document.getElementById("cb");
   
   // Show chatbox when icon is clicked
   chatIcon.addEventListener("click", () => {
      chatContainer.style.display = "block";
   });
   
   // Close chatbox when close button is clicked
   closeButton.addEventListener("click", () => {
      chatContainer.style.display = "none";
   });
   document.addEventListener("DOMContentLoaded", () => {
   document.getElementById('sb').addEventListener('click', processInput);
   document.getElementById('user-input').addEventListener('keypress', (e) => {
   if (e.key === 'Enter') processInput();
   });
   });
   // Advanced keyword analysis function with partial matching
   function analyzeQuery(userInput) {
   let bestMatch = { category: null, score: 0 };
   const inputWords = userInput.toLowerCase().split(/\s+/); // Split input into words
   
   for (const [category, data] of Object.entries(knowledgeBase)) {
   let score = 0;
   
   for (const keyword of data.keywords) {
      const keywordPrefix = keyword.slice(0, 3).toLowerCase(); // Get first 3 letters
      for (const word of inputWords) {
          if (word.startsWith(keywordPrefix)) {
              score++; // Increase score for partial matches
          }
      }
   }
   
   if (score > bestMatch.score) {
      bestMatch = { category, score };
   }
   }
   
   if (bestMatch.score > 0) {
   return knowledgeBase[bestMatch.category].response;
   }
   
   return `ü§ñ I'm here to help! Ask me about jewelry, handbags, perfumes, or sunglasses. üòä`;
   }
   
   
   const knowledgeBase = {
   greetings: {
   keywords: ['hello', 'hi', 'hey', 'welcome', 'greetings'],
   response: "Hello! üòä I'm Magic AI. Ask me about jewelry, handbags, perfumes, or sunglasses!"
   },
   jewelry: {
   keywords: ['jewelry', 'jewellery ','bracelet', 'necklace', 'ring', 'gold', 'silver', 'earrings', 'pendant'],
   products: {
      boys: {
      neckchain: "üìø **Neck Chain**: ‚Çπ2,999",
      chain_bracelet: "üíé **Chain Bracelet**: ‚Çπ2,999",
      Golden_Bracelet: "üíç **Golden Bracelet**: ‚Çπ2,999",
      Gold_Ring: "‚ú® **Gold Ring**: ‚Çπ2,999"
   },
   girls: {
      necklace: "üìø **Necklace**: ‚Çπ2,999 (Original: ‚Çπ2,399)",
      ring: "üíç **Ring**: ‚Çπ2,999 (Original: ‚Çπ2,999)",
      earrings: "‚ú® **Earrings**: ‚Çπ2,999 (Original: ‚Çπ2,999)",
      bracelet: "üíé **Bracelet**: ‚Çπ2,999 (Original: ‚Çπ2,999)"
   }
   },
   response: `
   <strong>‚ú® Our jewelry collection includes:</strong>
    <strong>‚ú® Our Jewelry Collection:</strong>
   <p>Are you looking for <strong>Boys' or Girls' accessories?</strong></p>
   <button onclick="showJewelryOptions('boys')">üë¶ Boys' Accessories</button>
   <button onclick="showJewelryOptions('girls')">üëß Girls' Accessories</button>
   <br>
   <em>Want more details? Click below:</em>
   <br>
   <a href="nav.html" target="_blank"><strong>üîó View All Jewelry</strong></a>`
   },
   handbags: {
   keywords: ['handbag', 'purse', 'bag', 'leather'],
   products: {
      "Handbag Brown": "üëú **Brown Leather Bag**: ‚Çπ2,999 - Classic vintage",
      "Handbag Black": "üñ§ **Black Fabric Bag**: ‚Çπ2,999 - Travel-friendly",
      "Handbag greycraft": "üîπ **GreyCraft Bag**: ‚Çπ2,999 - Multiple compartments",
      "Handbag": "‚ú® **Stylish Clutch**: ‚Çπ2,999 - Perfect for evenings out"
   },
   response: `
   <strong>üëú Handbag options:</strong>
   <ul>
      <li><strong>Handbag Brown</strong>: ‚Çπ2,999 - Classic vintage</li>
      <li><strong>Handbag Black </strong>: ‚Çπ2,999 - Travel-friendly</li>
      <li><strong>Handbag GreyCraft</strong>: ‚Çπ2,999 - Multiple compartments</li>
      <li><strong>Handag</strong>: ‚Çπ2,999 - Perfect for evenings out</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
   <a href="handbag.html" target="_blank"><strong>üîó View All Handbags</strong></a>`
   },
   
   perfumes: {
   keywords: ['perfume', 'fragrance', 'scent', 'body spray'],
   products: {
      "envy": "üåø **Envy Body Spray**: ‚Çπ2,999 - Fresh daily wear",
      "Denver": "üî• **Wild Stone EDT**: ‚Çπ2,999 - Adventurous scent",
      "wild stone": "üå¨ **Fogg Xtreme**: ‚Çπ2,999 - Long-lasting",
      "fogg": "üí® **Denver**: ‚Çπ2,999 - Light and refreshing"
   },
   response: `
   <strong>üå∏ Popular fragrances:</strong>
   <ul>
      <li><strong>envy</strong>: ‚Çπ2,999 - Fresh daily wear</li>
      <li><strong>Denver</strong>: ‚Çπ2,999 - Adventurous scent</li>
      <li><strong>wild stone</strong>: ‚Çπ2,999 - Long-lasting</li>
      <li><strong>fogg</strong>: ‚Çπ2,999 - Light and refreshing</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
         <a href="perfume.html" target="_blank"><strong>üîó View All Perfumes</strong></a>`
   
   },
   sunglasses: {
   keywords: ['sunglasses', 'shades', 'eyewear', 'glasses','sunglass'],
   products: {
      "envy": "üåø **Envy Body Spray**: ‚Çπ2,999 - Fresh daily wear",
      "Denver": "üî• **Wild Stone EDT**: ‚Çπ2,999 - Adventurous scent",
      "wild stone": "üå¨ **Fogg Xtreme**: ‚Çπ2,999 - Long-lasting",
      "fogg": "üí® **Denver**: ‚Çπ2,999 - Light and refreshing"
   },
   response: `
   <strong>üå∏ Popular Sunglasses:</strong>
   <ul>
      <li><strong>glass</strong>: ‚Çπ2,999 - daily wear</li>
      <li><strong>Goggles</strong>: ‚Çπ2,999 - Adventurous </li>
      <li><strong>sunglass thinx</strong>: ‚Çπ2,999 - trendy</li>
      <li><strong>glasses</strong>: ‚Çπ2,999 - Light </li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
         <a href="sunglasses.html" target="_blank"><strong>üîó View All sunglass</strong></a>`
   
   },
   info: {
   keywords: [ 'about', 'who are you', 'company','about us'],
   response: `
   <strong>‚ú® About Magic Accessories:</strong>
   <p>We offer high-quality fashion accessories with a touch of magic! From elegant jewelry to stylish handbags, we have it all.</p>
   <em>Want more details? Click below:</em>
   <br>
   <a href="about.html" target="_blank"><strong>üîó About us </strong></a>`
   },
   support: {
   keywords: ['help', 'support', 'customer', 'contact','email','email id'],
   response: `
   <strong>üìû Customer Support:</strong>
   <ul>
      <li>Email: om64312@gmail.com</li>
      <li>Hours: 9 AM - 6 PM IST</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
   <a href="theories/hecu.html" target="_blank"><strong>üîó Contact Support</strong></a>`
   },
   terms: {
   keywords: ['terms', 'policy', 'return', 'refund', 'exchange'],
   response: `
   <strong>üìú Terms & Policies:</strong>
   <ul>
      <li>30-day return policy</li>
      <li>Refunds processed within 7 days</li>
      <li>Exchanges available for defective products</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
   <a href="theories/terms of service.html" target="_blank"><strong>üîó View Terms & Conditions</strong></a>`
   },
   social: {
   keywords: ['social', 'follow', 'twitter', 'linkedin', 'x', 'connect','platform'],
   response: `
   <strong>üì¢ Stay Connected!</strong>
   <ul>
      <li>Follow us on <a href="https://x.com/Soni13062004?t=M0_6NmR6ZCFP9s_RLxrP6A&s=09" target="_blank"><strong>Twitter (X)</strong></a></li>
      <li>Connect with us on <a href="https://www.linkedin.com/in/om-soni-6425262a9?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_apps" target="_blank"><strong>LinkedIn</strong></a></li>
   </ul>
   <em>Follow us for updates, deals, and new arrivals! üöÄ</em>`
   }
   
   
   };
   
   function processInput() {
   const inputField = document.getElementById('user-input');
   const userMessage = inputField.value.trim().toLowerCase();
   
   if (!userMessage) return;
   
   displayMessage(userMessage, 'user-message');
   inputField.value = '';
   
   const loading = displayMessage('...', 'bot-message');
   
   setTimeout(() => {
   loading.remove();
   const response = analyzeQuery(userMessage);
   displayMessage(response, 'bot-message');
   }, 800);
   }
   function showJewelryOptions(category) {
   let response = '';
   
   if (category === 'boys') {
   response = `
   <strong>üë¶ Boys' Jewelry Collection:</strong>
   <ul>
      <li>üìø Neck Chain - ‚Çπ3,299</li>
      <li>üíé Chain Bracelet - ‚Çπ2,799</li>
      <li>üíç Golden Bracelet - ‚Çπ1,999</li>
      <li>‚ú® Gold Ring - ‚Çπ3,999</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
   <a href="nav.html" target="_blank"><strong>üîó View All Boys' Jewelry</strong></a>`;
   } else {
   response = `
   <strong>üëß Girls' Jewelry Collection:</strong>
   <ul>
      <li>üìø Necklace - ‚Çπ2,999 (Original: ‚Çπ3,399)</li>
      <li>üíç Ring - ‚Çπ2,999 (Original: ‚Çπ3,399)</li>
      <li>‚ú® Earrings - ‚Çπ2,999 (Original: ‚Çπ3,399)</li>
      <li>üíé Bracelet - ‚Çπ2,999 (Original: ‚Çπ3,399)</li>
   </ul>
   <em>Want more details? Click below:</em>
   <br>
   <a href="nav.html" target="_blank"><strong>üîó View All Girls' Jewelry</strong></a>`;
   }
   
   displayMessage(response, 'bot-message');
   }
   
   function analyzeQuery(userInput) {
   let bestMatch = null;
   let bestMatchType = null; // "product" or "category"
   
   for (const [category, data] of Object.entries(knowledgeBase)) {
   for (const [product, response] of Object.entries(data.products || {})) {
      if (userInput.includes(product)) {
          return response; // Exact product match takes priority
      }
   }
   
   for (const keyword of data.keywords) {
      if (userInput.includes(keyword)) {
          if (bestMatch === null || bestMatchType !== "product") { // Prefer product matches
              bestMatch = data.response;
              bestMatchType = "category";
          }
      }
   }
   }
   
   return bestMatch || `ü§ñ I'm here to help! Ask me about jewelry, handbags, perfumes, or sunglasses. üòä`;
   }
   
   
   function displayMessage(content, type) {
   const chatBox = document.getElementById('chat-box');
   const messageDiv = document.createElement('div');
   messageDiv.className = `chat-message ${type}`;
   messageDiv.innerHTML = content;
   chatBox.appendChild(messageDiv);
   chatBox.scrollTop = chatBox.scrollHeight;
   return messageDiv;
   }
   //wishlist// 
   document.addEventListener("DOMContentLoaded", function () {
   const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
   const notificatio = document.getElementById("notificatio");
   const wishlistIcon = document.getElementById("wishlist-icon");
   const wishlistPopup = document.getElementById("wishlist-popup");
   const closeWishlist = document.getElementById("close-wishlist");
   const clearWishlistBtn = document.getElementById("clear-wishlist");
   
   if (!wishlistIcon || !wishlistPopup || !closeWishlist || !clearWishlistBtn || !notificatio) {
   console.error("One or more required elements are missing.");
   return;
   }
   
   // Update wishlist count and buttons on page load
   updateWishlistCount();
   updateWishlistButtons();
   renderWishlist();
   
   // Add event listeners to wishlist buttons
   // document.querySelectorAll(".wishlist-btn").forEach(button => {
   //     button.addEventListener("click", function () {
   //         const productCard = this.closest(".product-card");
   //         const productId = productCard.getAttribute("data-id");
   //         const productName = productCard.getAttribute("data-name");
   //         const productImage = productCard.getAttribute("data-image");
   //         const productPrice = productCard.getAttribute("data-price");
   
   //         const existingProduct = wishlist.find(item => item.id === productId);
   //         if (!existingProduct) {
   //             wishlist.push({ id: productId, name: productName, image: productImage, price: productPrice });
   //             this.classList.add("active");
   //             showNotification("‚ù§Ô∏è Added to Wishlist!", "pink");
   //         } else {
   //             wishlist.splice(wishlist.indexOf(existingProduct), 1);
   //             this.classList.remove("active");
   //             showNotification("‚ùå Removed from Wishlist!", "red");
   //         }
   
   //         localStorage.setItem("wishlist", JSON.stringify(wishlist));
   //         updateWishlistCount();
   //         renderWishlist();
   //     });
   // });
   
   
   document.querySelectorAll(".wishlist-btn").forEach(button => {
   button.addEventListener("click", function () {
   
   const productCard = this.closest(".product-card");
   const productId = productCard.getAttribute("data-id");
   const productName = productCard.getAttribute("data-name");
   const productImage = productCard.getAttribute("data-image");
   const productPrice = productCard.getAttribute("data-price");
   
   const isActive = this.classList.contains("active");
   
   if (!isActive) {
      // Add to wishlist (server)
      fetch("/wishlist/add", {
          method: "POST",
          headers: {
              "Content-Type": "application/json"
          },
          body: JSON.stringify({
               productId,
              name: productName,
              image: productImage,
              price: productPrice
          })
      })
      .then(res => res.json())
      .then(data => {
          if (data.success) {
              this.classList.add("active");
              updateWishlistCount();
              showNotification("‚ù§Ô∏è Added to Wishlist!", "pink");
          }
      });
   } else {
      // Remove from wishlist (server)
      fetch("/wishlist/remove", {
          method: "POST",
          headers: {
              "Content-Type": "application/json"
          },
          body: JSON.stringify({
             
              productId
          })
      })
      .then(res => res.json())
      .then(data => {
          if (data.success) {
              this.classList.remove("active");
              updateWishlistCount();
              showNotification("‚ùå Removed from Wishlist!", "red");
          }
      });
   }
   });
   });
   
   // Toggle wishlist popup
   wishlistIcon.addEventListener("click", () => {
   wishlistPopup.classList.toggle("show");
   updateWishlistCount();
   renderWishlist();
   });
   
   // Close wishlist popup
   closeWishlist.addEventListener("click", () => {
   updateWishlistCount();
   wishlistPopup.classList.remove("show");
   });
   
   // Clear all wishlist items
   // clearWishlistBtn.addEventListener("click", () => {
   //     wishlist.length = 0; // Clear the wishlist array
   //     localStorage.setItem("wishlist", JSON.stringify(wishlist)); // Update localStorage
   //     updateWishlistCount(); // Update the wishlist count
   //     renderWishlist(); // Clear the wishlist popup
   //     updateWishlistButtons(); // Reset all wishlist buttons to their default state
   //     showNotification("üóëÔ∏è Wishlist cleared!", "red"); // Show notification
   // });
   
   
   clearWishlistBtn.addEventListener("click", async () => {
   try {
   const response = await fetch("/wishlist/clear", {
      method: "POST",
      headers: {
          "Content-Type": "application/json",
          // Add CSRF token here if needed
      }
   });
   
   const data = await response.json();
   
   if (data.success) {
      wishlist.length = 0; // Clear local wishlist array
      localStorage.setItem("wishlist", JSON.stringify(wishlist)); // Update localStorage
      updateWishlistCount(); // Update wishlist count
      renderWishlist(); // Refresh the wishlist UI
      updateWishlistButtons(); // Reset wishlist buttons
      showNotification("üóëÔ∏è Wishlist cleared!", "red");
   } else {
      showNotification("‚ùå Failed to clear wishlist", "red");
   }
   } catch (error) {
   console.error("Error clearing wishlist:", error);
   showNotification("‚ùå Server error while clearing wishlist", "red");
   }
   });
   
   
   // Update wishlist count
   async function updateWishlistCount() {
   try {
   const res = await fetch(`/wishlist/list`);
   const data = await res.json();
   
   const wishlistCount = document.getElementById("wishlist-count");
   if (wishlistCount) {
      wishlistCount.textContent = data.length;
   }
   } catch (error) {
   console.error("Error updating wishlist count:", error);
   }
   }
   
   async function renderWishlist() {
   try {
   const res = await fetch(`/wishlist/list`);
   const data = await res.json();
   console.log(data);
   
   const wishlistContainer = document.getElementById("wishlist-items");
   if (wishlistContainer) {
      wishlistContainer.innerHTML = data.length === 0
          ? "<p>Your wishlist is empty.</p>"
          : data.map(item => `
              <div class="wishlist-item">
                  <img src="${item.image}" alt="${item.name}">
                  <span>${item.name}</span>
                  <span class="price">‚Çπ${item.price}</span>
              </div>
          `).join("");
   }
   
   // Now add "active" class to buttons if they are wishlisted
   const productIds = data.map(item => item.productId); // create array of product IDs in wishlist
   document.querySelectorAll(".wishlist-btn").forEach(button => {
      const productCard = button.closest(".product-card");
      const productId = productCard?.getAttribute("data-id");
   
      if (productIds.includes(productId)) {
          button.classList.add("active");
      } else {
          button.classList.remove("active"); // optional: remove if not wishlisted
      }
   });
   
   } catch (error) {
   console.error("Error rendering wishlist:", error);
   }
   }
   
   
   
   // Show notification
   function showNotification(message, color) {
   notificatio.textContent = message;
   notificatio.style.backgroundColor = color;
   notificatio.classList.add("show");
   setTimeout(() => notificatio.classList.remove("show"), 2000);
   }
   
   // Update wishlist buttons
   function updateWishlistButtons() {
   document.querySelectorAll(".wishlist-btn").forEach(button => {
      const productId = button.closest(".product-card").getAttribute("data-id");
      if (wishlist.some(item => item.id === productId)) {
          button.classList.add("active");
      } else {
          button.classList.remove("active");
      }
   });
   }
   });
   // addtocart/
   function addToCart(name, price, quantity) {
   alert();
   fetch('http://localhost:3000/add-to-cart', {
   method: 'POST',
   headers: { 'Content-Type': 'application/json' },
   body: JSON.stringify({ name, price, quantity })
   })
   .then(response => response.json())
   .then(data => console.log(data.message))
   .catch(error => console.error('Error:', error));
   }
   
   // Example usage
   document.getElementById('addToCartBtn').addEventListener('click', () => {
   addToCart('Product Name', 100, 1);
   });
   
</script>
</body>
</html>
